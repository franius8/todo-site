(()=>{"use strict";const e=function(e){return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()},t=function(e){var t=e,n=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),d=t.getTime()-n.getTime();return Math.floor(d/864e5)},n=function(e){var t=String(e.getDate()).padStart(2,"0"),n=e.getMonth()+1;return e.getFullYear()+"-"+n+"-"+t},d=function(e,t,n,d,o,i){var r=!1;return{heading:e,text:t,date:n,priority:d,iD:o,projectiDs:i,markAsDone:function(){return r=!r},getDoneStatus:function(){return r}}};var o;const i=(o=JSON.parse(localStorage.getItem("idsary")||"[]"),{generateID:function(){for(;;){var e=Math.floor(1e4*Math.random());if(!o.includes(e))return o.push(e),localStorage.setItem("idsary",JSON.stringify(o)),e}},freeID:function(e){var t=o.indexOf(e);o.splice(t,1),localStorage.setItem("idsary",JSON.stringify(o))}}),r=function(e){return new Date(e)};var a,c,l,u=(a=[],c=[],l=[],{createToDo:function(e,t,n,o){var r=i.generateID(),c=d(e,t,n,o,r,[]);return a.push(c),localStorage.setItem("todoary",JSON.stringify(a)),c},modifyToDo:function(e,t,n,d,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===d&&(d=null),void 0===o&&(o=null);var i=a.find((function(t){return t.iD===e}));null!==t&&(i.heading=t),null!==n&&(i.text=n),null!==d&&(i.date=d),null!==o&&(i.priority=o)},deleteToDo:function(e){var t=a.find((function(t){return t.iD===e}));t.projectiDs.length>0&&t.projectiDs.forEach((function(e){var n=l.find((function(t){return t.iD===e})),d=n.toDos.indexOf(t);n.toDos.splice(d,1)}));var n=a.findIndex((function(t){return t.iD===e}));a.splice(n,1),localStorage.setItem("todoary",JSON.stringify(a)),i.freeID(e)},getToDoAry:function(){return a},loadArys:function(){JSON.parse(localStorage.getItem("todoary")||"[]").forEach((function(e){e.date=r(e.date),a.push(d(e.heading,e.text,e.date,e.priority,e.iD,e.projectiDs))})),(c=JSON.parse(localStorage.getItem("doneary")||"[]")).forEach((function(e){e.date=r(e.date)})),(l=JSON.parse(localStorage.getItem("projectary")||"[]")).forEach((function(e){e.date=r(e.date)}))},getDoneAry:function(){return c},moveToDone:function(e){var t=a.findIndex((function(t){return t.iD===e})),n=a.splice(t,1)[0];console.log(n),n.markAsDone(),localStorage.setItem("todoary",JSON.stringify(a)),c.push(n),localStorage.setItem("doneary",JSON.stringify(c))},findTodDo:function(e){return a.find((function(t){return t.iD===e}))},createProject:function(e,t,n,d){var o=function(e,t,n,d,o){return{iD:e,name:t,date:d,priority:o,toDos:n}}(i.generateID(),e,t,n,d);return l.push(o),localStorage.setItem("projectary",JSON.stringify(l)),o},modifyProject:function(e,t,n,d,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===d&&(d=null),void 0===o&&(o=null);var i=l.find((function(t){return t.iD===e}));null!==t&&(i.name=t),null!==n&&(i.toDos=n),null!==d&&(i.date=d),null!==o&&(i.priority=o)},getProjectAry:function(){return l},deleteProject:function(e){var t=l.findIndex((function(t){return t.iD===e}));l.splice(t,1),localStorage.setItem("projectary",JSON.stringify(l)),i.freeID(e)},findProject:function(e){return l.find((function(t){return t.iD===e}))}});const s=u,m=function(e){return[document.getElementById("todotitle").value,document.getElementById("todocontent").value,new Date(document.getElementById("tododate").value),document.querySelector('input[name="todopriority"]:checked').value]},p=function(e){var t=e.target,n=t.querySelector("#todotitleedit").value,d=t.querySelector("#todocontentedit").value,o=new Date(t.querySelector("#tododateedit").value),i=t.querySelector('input[name="todopriorityedit"]:checked').value;return t.reset(),[n,d,o,i]},v=function(e){var t=e.target,n=document.getElementById("projectname").value,d=new Date(document.getElementById("projectdate").value),o=document.querySelector('input[name="projectpriority"]:checked').value;return t.reset(),[n,d,o]},f=function(e){var t=e.querySelectorAll('input[name="projectcheckbox"]:checked'),n=Array.from(t).map((function(e){return Number(e.value)}));return console.log(n),n};var h={handleFormSubmission:function(e){e.preventDefault();var t=e.target,n=t.parentNode,d=m(t);t.reset(),n.style.display="none",s.createToDo(d[0],d[1],d[2],d[3]),I.displayToDos(s.getToDoAry())},handleEditFormSubmission:function(e){e.preventDefault();var t=e.target,n=t.parentNode.parentNode.parentNode,d=p(e);t.reset(),s.modifyToDo(Number(n.id),d[0],d[1],d[2],d[3]),I.displayToDos(s.getToDoAry())},handleNewProjectFormSubmission:function(e){e.preventDefault();var t=e.target,n=t.parentNode,d=v(e);t.reset(),n.style.display="none",s.createProject(d[0],[],d[1],d[2]),I.displayProjects(s.getProjectAry())},handleAddProjectToDosFormSubmission:function(e,t){e.preventDefault();var n=e.target,d=n.parentNode,o=f(n);n.reset(),d.style.display="none";var i=s.findProject(t);o.forEach((function(e){i.toDos.push(s.findTodDo(e))})),console.log(i)}};const b=h;var y,g,C,E,D,L,A,j,k,T=(y=["Low","Standard","High"],g=["Normal","Urgent"],C=document.getElementById("content")||document.createElement("content"),E=function(e){var t=document.createElement("div");t.setAttribute("id","closebuttondiv");var n=document.createElement("button");return n.setAttribute("id","closebutton"),n.innerHTML='<span class="material-symbols-outlined">close</span>',n.addEventListener("click",(function(){e.style.display="none",C.classList.remove("blurred")})),t.appendChild(n),t},D=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.textContent=t,n},L=function(e,t,n){void 0===n&&(n=null);var d=document.createElement("div");d.classList.add("inputdiv"),d.appendChild(D("radiocontainer","Priority:"));var o=document.createElement("div");return o.classList.add("radiocontainer"),t.forEach((function(t){var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name",e),d.setAttribute("value",t),d.setAttribute("id",t),t===n&&d.setAttribute("checked","checked");var i=document.createElement("label");i.setAttribute("for",t),i.textContent=t[0].toUpperCase()+t.substring(1),o.appendChild(d),o.appendChild(i)})),d.appendChild(o),d},A=function(){var e=document.createElement("button");return e.setAttribute("type","submit"),e.setAttribute("id","todosubmit"),e.textContent="Add",e},j=function(e,t,n,d){void 0===d&&(d=!0);var o=document.createElement("div");return o.classList.add("inputdiv"),o.appendChild(D(t,n)),o.appendChild(function(e,t,n,d){void 0===n&&(n="empty");var o=document.createElement("input");return o.setAttribute("type",e),o.setAttribute("name",t),o.setAttribute("id",t),!0===d&&o.setAttribute("required","true"),"empty"!==n&&o.setAttribute("value",n),o}(e,t,"empty",d)),o},k=function(e,t,n,d,o){void 0===d&&(d=!0);var i=j(e,t,n,d);return i.querySelector("#".concat(t)).value=o,i},{buildForm:function(){var e=document.createElement("div");e.setAttribute("id","formdiv");var t=document.createElement("h2");t.classList.add("formheading"),t.textContent="Add a new ToDo";var n=document.createElement("form");return n.appendChild(j("text","todotitle","Title:")),n.appendChild(j("text","todocontent","Content (optional):",!1)),n.appendChild(j("date","tododate","Due date:")),n.appendChild(L("todopriority",y)),n.appendChild(A()),e.appendChild(E(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){b.handleFormSubmission(e),C.classList.remove("blurred")})),e},buildEditForm:function(e){var t=e.target,d=t.parentNode,o=d.parentNode.querySelector(".todocontent"),i=s.findTodDo(Number(t.getAttribute("objectid"))),r=i.heading,a=i.text,c=i.date,l=i.priority;o.innerHTML="",o.classList.add("duringedit"),o.classList.remove("todocontent");var u=document.createElement("form");u.classList.add("todocontent"),u.setAttribute("id","editform"),u.appendChild(k("text","todotitleedit","Title:",!0,r)),u.appendChild(k("text","todocontentedit","Content (optional):",!1,a)),u.appendChild(k("date","tododateedit","Due date:",!0,n(c))),u.appendChild(L("todopriorityedit",y,l)),o.appendChild(u),d.innerHTML="";var m=document.createElement("button");m.classList.add("cancelbutton"),m.innerHTML='<span class="material-symbols-outlined">undo</span>',m.addEventListener("click",(function(){I.displayToDos(s.getToDoAry())}));var p=document.createElement("button");p.classList.add("acceptbutton"),p.setAttribute("type","submit"),p.setAttribute("form","editform"),p.innerHTML='<span class="material-symbols-outlined">check</span>',u.addEventListener("submit",(function(e){b.handleEditFormSubmission(e)})),d.appendChild(m),d.appendChild(p)},buildNewProjectForm:function(){var e=document.createElement("div");e.setAttribute("id","projectformdiv");var t=document.createElement("h2");t.classList.add("formheading"),t.textContent="Add a new Project";var n=document.createElement("form");return n.appendChild(j("text","projectname","Name:")),n.appendChild(j("date","projectdate","Due date:")),n.appendChild(L("projectpriority",g)),n.appendChild(A()),e.appendChild(E(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){b.handleNewProjectFormSubmission(e),C.classList.remove("blurred")})),e},buildAddProjectToDoForm:function(t,n){var d=document.createElement("div");d.setAttribute("id","projecttodosformdiv"),d.style.display="block";var o=document.createElement("h2");o.classList.add("formheading"),o.textContent="Add new ToDos to Project";var i=document.createElement("form");d.appendChild(E(d)),d.appendChild(o);var r=document.createElement("div");r.classList.add("inputdiv"),r.appendChild(D("projectcheckboxdiv","Select ToDos:"));var a=s.getToDoAry(),c=document.createElement("div");return c.classList.add("projectcheckboxdiv"),a.forEach((function(t){var n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id","todocheckbox".concat(t.iD)),n.setAttribute("value","".concat(t.iD)),n.setAttribute("name","projectcheckbox");var d=document.createElement("label");d.setAttribute("for","todocheckbox".concat(t.iD));var o=document.createElement("div");o.textContent=t.heading;var i=document.createElement("div");i.classList.add("formtododate"),i.innerHTML='<span class="material-symbols-outlined">calendar_month</span> '.concat(e(t.date)),d.appendChild(o),d.appendChild(i),c.appendChild(n),c.appendChild(d)})),r.appendChild(c),i.appendChild(r),i.appendChild(A()),d.appendChild(i),i.addEventListener("submit",(function(e){b.handleAddProjectToDosFormSubmission(e,n),C.classList.remove("blurred")})),d}});const S=T;var x=function(){var n=document.getElementById("content")||document.createElement("content"),d=function(n){var d=document.createElement("div");d.classList.add("tododate");var o=document.createElement("div");o.innerHTML='<span class="material-symbols-outlined">calendar_month</span>';var i=document.createElement("div"),r=t(n);return 1===r?i.textContent=e(n)+" ("+t(n)+" day left)":r>=0?i.textContent=e(n)+" ("+t(n)+" days left)":-1===r?(d.classList.add("missedtodo"),i.textContent=e(n)+" ("+Math.abs(t(n))+" day ago)"):(d.classList.add("missedtodo"),i.textContent=e(n)+" ("+Math.abs(t(n))+" days ago)"),d.appendChild(o),d.appendChild(i),d},o=function(e){var t=document.createElement("div");t.classList.add("todopriority");var n=document.createElement("div");n.classList.add("prioritycircle"),"Standard"===e?n.style.backgroundColor="orange":"Low"===e?n.style.backgroundColor="blue":"High"===e?n.style.backgroundColor="red":"Normal"===e?n.style.backgroundColor="skyblue":"Urgent"===e&&(n.style.backgroundColor="crimson");var d=document.createElement("div");return d.textContent=e+" priority",t.appendChild(n),t.appendChild(d),t},i=function(e){var t=document.createElement("div");t.classList.add("projecttodoscontainer");var d=s.findProject(e).toDos;if(0===d.length){var o=document.createElement("div");o.classList.add("notodos"),o.textContent="No ToDos for this project yet";var i=document.createElement("button");i.classList.add("addtodobutton"),i.textContent="Add ToDo",i.addEventListener("click",(function(t){n.appendChild(S.buildAddProjectToDoForm(t,e)),n.classList.add("blurred")})),t.appendChild(o),t.appendChild(i)}else d.forEach((function(e){p(e,t)}));return t},r=function(){var e=document.createElement("div");return e.classList.add("checkbox"),e.innerHTML="&#10003",e.addEventListener("click",(function(e){var t=e.target.parentNode.parentNode,n=Number(t.id);s.moveToDone(n),v(s.getToDoAry())})),e},a=function(e){var t=document.createElement("div");return t.classList.add("labelstripe"),"Standard"===e?t.style.backgroundColor="orange":"Low"===e?t.style.backgroundColor="blue":"High"===e?t.style.backgroundColor="red":"Normal"===e?t.style.backgroundColor="skyblue":"Urgent"===e&&(t.style.backgroundColor="crimson"),t},c=function(){document.querySelectorAll(".navitem").forEach((function(e){e.addEventListener("click",(function(e){switch(e.target.id){case"homepagelink":x.homePageBuilder();break;case"donelink":x.donePageBuilder();break;case"projectlink":x.projectPageBuilder()}}))}))},l=function(){n.textContent=""},u=function(e){var t=document.createElement("div");t.classList.add("buttondiv");var n=document.createElement("button");n.classList.add("editbutton"),n.setAttribute("objectid",e),n.innerHTML='<span class="material-symbols-outlined">edit</span>',n.addEventListener("click",(function(e){S.buildEditForm(e)}));var d=document.createElement("button");return d.classList.add("deletebutton"),d.setAttribute("objectid",e),d.innerHTML='<span class="material-symbols-outlined">delete</span>',d.addEventListener("click",(function(e){var t=e.target,n=Number(t.getAttribute("objectid"));confirm("Are you sure you want to delete that?\n(This is an irreversible operation)")&&(s.deleteToDo(n),v(s.getToDoAry()))})),t.appendChild(n),t.appendChild(d),t},m=function(){var e=document.createElement("header");e.setAttribute("id","header"),e.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","logodiv");var t=document.createElement("div");t.setAttribute("id","checkmark"),t.innerHTML="&#10003";var n=document.createElement("div");return n.setAttribute("id","logo"),n.textContent="To Do",e.appendChild(t),e.appendChild(n),e}()),e.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","navigationdiv");var t=document.createElement("div");t.classList.add("navitem"),t.setAttribute("id","homepagelink"),t.innerHTML='<span class="material-symbols-outlined">house</span> Homepage';var n=document.createElement("div");n.innerHTML='<span class="material-symbols-outlined">done</span> Done',n.classList.add("navitem"),n.setAttribute("id","donelink");var d=document.createElement("div");return d.classList.add("navitem"),d.setAttribute("id","projectlink"),d.innerHTML='<span class="material-symbols-outlined">assignment</span> Projects',e.appendChild(t),e.appendChild(n),e.appendChild(d),e}());var t=document.createElement("button");return t.setAttribute("id","addnewbutton"),t.textContent="Add ToDo",e.appendChild(t),e},p=function(e,t,n){void 0===n&&(n=!1);var i=e.iD.toString(),c=document.createElement("div");!1===n?c.classList.add("todo"):c.classList.add("donetodo"),c.setAttribute("id",i),c.appendChild(a(e.priority));var l=document.createElement("div");l.classList.add("middlediv");var s=document.createElement("div");s.classList.add("checkboxdiv"),s.appendChild(r()),l.appendChild(s),l.appendChild(function(e){var t=document.createElement("div");t.classList.add("todocontent");var n=document.createElement("div");n.classList.add("todoheader"),n.textContent=e.heading;var i=document.createElement("div");return i.classList.add("todotext"),i.textContent=e.text,t.appendChild(n),t.appendChild(i),t.appendChild(d(e.date)),t.appendChild(o(e.priority)),t}(e)),l.appendChild(u(i)),c.appendChild(l),t.appendChild(c)},v=function(e){var t=document.getElementById("tododiv")||document.createElement("tododiv");if(document.getElementById("tododiv").textContent="",0===e.length){var d=document.createElement("div");return d.setAttribute("id","actiondiv"),d.innerHTML='No ToDos yet. Time to <span id="addnew">add a new one</span>.',d.querySelector("#addnew").addEventListener("click",(function(){document.getElementById("formdiv").style.display="block",n.classList.add("blurred")})),void t.appendChild(d)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return p(e,t)}))},f=function(e){document.getElementById("donediv").textContent="";var t=document.getElementById("donediv");e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return p(e,t,!0)}))},h=function(e){var t=document.getElementById("projectdiv");document.getElementById("projectdiv").textContent="",e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return function(e,t){var n=document.createElement("div");n.classList.add("projectcontainer");var c=document.createElement("div");c.classList.add("project"),c.setAttribute("id",e.iD.toString());var l=document.createElement("div");l.classList.add("middlediv");var s,m,p=document.createElement("div");p.classList.add("checkboxdiv"),p.appendChild(r()),c.appendChild(a(e.priority)),l.appendChild(p),l.appendChild(function(e){var t=document.createElement("div");t.classList.add("projectcontent");var n=document.createElement("div");return n.classList.add("projectname"),n.textContent=e.name,t.appendChild(n),t.appendChild(d(e.date)),t.appendChild(o(e.priority)),t}(e)),l.appendChild(u(e.iD.toString())),c.appendChild(l),c.appendChild((s=e.iD,(m=document.createElement("div")).classList.add("expandbutton"),m.setAttribute("objectid",s.toString()),m.innerHTML='<span class="material-symbols-outlined">expand_more</span>',m.addEventListener("click",(function(e){var t=document.getElementById(s.toString()),n=t.nextSibling;n.textContent="",n.appendChild(i(s)),"none"===n.style.display?(n.textContent="",n.appendChild(i(s)),n.style.display="block"):n.style.display="none",t.classList.toggle("expanded")})),m)),n.appendChild(c);var v=document.createElement("div");v.classList.add("projecttododiv"),v.setAttribute("objectid",e.iD.toString()),v.style.display="none",n.appendChild(v),t.appendChild(n)}(e,t)}))};return{homePageBuilder:function(){l();var e=document.createElement("div");e.setAttribute("id","tododiv"),n.appendChild(m()),n.appendChild(e),n.appendChild(S.buildForm());var t=document.getElementById("addnewbutton"),d=document.getElementById("formdiv");t.addEventListener("click",(function(){d.style.display="block",n.classList.add("blurred")})),document.getElementById("homepagelink").classList.add("active"),c(),v(s.getToDoAry())},donePageBuilder:function(){l();var e=document.createElement("div");e.setAttribute("id","donediv"),n.appendChild(m()),n.appendChild(e),n.appendChild(S.buildForm());var t=document.getElementById("addnewbutton"),d=document.getElementById("formdiv");t.addEventListener("click",(function(){d.style.display="block",n.classList.add("blurred")})),document.getElementById("donelink").classList.add("active"),c(),f(s.getDoneAry())},projectPageBuilder:function(){l();var e=document.createElement("div");e.setAttribute("id","projectdiv"),n.appendChild(m()),n.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","newprojectbuttondiv");var t=document.createElement("button");return t.setAttribute("id","newprojectbutton"),t.textContent="Add a new project",e.appendChild(t),e}()),n.appendChild(e),n.appendChild(S.buildForm()),n.appendChild(S.buildNewProjectForm());var t=document.getElementById("addnewbutton"),d=document.getElementById("formdiv");t.addEventListener("click",(function(){d.style.display="block",n.classList.add("blurred")}));var o=document.getElementById("newprojectbutton"),i=document.getElementById("projectformdiv");o.addEventListener("click",(function(){i.style.display="block",n.classList.add("blurred")})),document.getElementById("projectlink").classList.add("active"),c(),h(s.getProjectAry())},displayToDos:v,displayDoneToDos:f,displayProjects:h}}();const I=x;s.loadArys(),I.homePageBuilder()})();
//# sourceMappingURL=main.js.map