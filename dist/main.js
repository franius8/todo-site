(()=>{"use strict";const e=function(e){return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()},t=function(e){var t=e,n=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),o=t.getTime()-n.getTime();return Math.floor(o/864e5)},n=function(e){var t=String(e.getDate()).padStart(2,"0"),n=e.getMonth()+1;return e.getFullYear()+"-"+n+"-"+t},o=function(e,t,n,o,d,r,i){void 0===i&&(i=!1);var a=i;return{heading:e,text:t,date:n,priority:o,iD:d,projectiDs:r,markAsDone:function(){return a=!a},getDoneStatus:function(){return a}}},d=function(e,t,n,o,d){var r=n;return{iD:e,name:t,date:o,priority:d,toDos:n,addToDo:function(e){r.push(e),s.updateProjectAry()},clearToDos:function(){r=[],s.updateProjectAry()},getToDos:function(){return r},setToDos:function(e){return r=e}}};var r;const i=(r=JSON.parse(localStorage.getItem("idsary")||"[]"),{generateID:function(){for(;;){var e=Math.floor(1e4*Math.random());if(!r.includes(e))return r.push(e),localStorage.setItem("idsary",JSON.stringify(r)),e}},freeID:function(e){var t=r.indexOf(e);r.splice(t,1),localStorage.setItem("idsary",JSON.stringify(r))}}),a=function(e){return new Date(e)};var c,l,u;const s=(c=[],l=[],u=[],{createToDo:function(e,t,n,d){var r=i.generateID(),a=o(e,t,n,d,r,[]);return c.push(a),localStorage.setItem("todoary",JSON.stringify(c)),a},modifyToDo:function(e,t,n,o,d){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===d&&(d=null);var r=c.find((function(t){return t.iD===e}));null!==t&&(r.heading=t),null!==n&&(r.text=n),null!==o&&(r.date=o),null!==d&&(r.priority=d)},deleteToDo:function(e){var t=c.find((function(t){return t.iD===e}));t.projectiDs.length>0&&t.projectiDs.forEach((function(e){var n=u.find((function(t){return t.iD===e})),o=n.getToDos().indexOf(t);n.toDos.splice(o,1)}));var n=c.findIndex((function(t){return t.iD===e}));c.splice(n,1),localStorage.setItem("todoary",JSON.stringify(c)),i.freeID(e)},getToDoAry:function(){return c},loadArys:function(){JSON.parse(localStorage.getItem("todoary")||"[]").forEach((function(e){e.date=a(e.date),c.push(o(e.heading,e.text,e.date,e.priority,e.iD,e.projectiDs))})),JSON.parse(localStorage.getItem("doneary")||"[]").forEach((function(e){e.date=a(e.date),l.push(o(e.heading,e.text,e.date,e.priority,e.iD,e.projectiDs,!0))})),JSON.parse(localStorage.getItem("projectary")||"[]").forEach((function(e){e.date=a(e.date),e.toDos.forEach((function(e){return e.date=a(e.date),e})),u.push(d(e.iD,e.name,e.toDos,e.date,e.priority))}))},getDoneAry:function(){return l},moveToDone:function(e){var t=c.findIndex((function(t){return t.iD===e})),n=c.splice(t,1)[0];console.log(n),n.markAsDone(),localStorage.setItem("todoary",JSON.stringify(c)),l.push(n),localStorage.setItem("doneary",JSON.stringify(l))},findTodDo:function(e){return c.find((function(t){return t.iD===e}))},createProject:function(e,t,n,o){var r=i.generateID(),a=d(r,e,t,n,o);return u.push(a),localStorage.setItem("projectary",JSON.stringify(u)),a},modifyProject:function(e,t,n,o,d){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===d&&(d=null);var r=u.find((function(t){return t.iD===e}));null!==t&&(r.name=t),null!==n&&r.setToDos(n),null!==o&&(r.date=o),null!==d&&(r.priority=d)},getProjectAry:function(){return u},deleteProject:function(e){var t=u.findIndex((function(t){return t.iD===e}));u.splice(t,1),localStorage.setItem("projectary",JSON.stringify(u)),i.freeID(e)},findProject:function(e){return u.find((function(t){return t.iD===e}))},updateProjectAry:function(){localStorage.setItem("projectary",JSON.stringify(u))}}),p=function(){return[document.getElementById("todotitle").value,document.getElementById("todocontent").value,new Date(document.getElementById("tododate").value),document.querySelector('input[name="todopriority"]:checked').value]},m=function(e){var t=e.target;return[t.querySelector("#todotitleedit").value,t.querySelector("#todocontentedit").value,new Date(t.querySelector("#tododateedit").value),t.querySelector('input[name="todopriorityedit"]:checked').value]},v=function(){return[document.getElementById("projectname").value,new Date(document.getElementById("projectdate").value),document.querySelector('input[name="projectpriority"]:checked').value]},f=function(e){var t=e.querySelectorAll('input[name="projectcheckbox"]:checked'),n=Array.from(t).map((function(e){return Number(e.value)}));return console.log(n),n},h=function(e){var t=e.target;return[t.querySelector("#projectnameedit").value,new Date(t.querySelector("#projectdateedit").value),t.querySelector('input[name="projectpriorityedit"]:checked').value]},y=function(e){e.preventDefault();var t=e.target,n=t.parentNode,o=p();t.reset(),n.style.display="none",s.createToDo(o[0],o[1],o[2],o[3]),w.displayToDos(s.getToDoAry())},b=function(e){e.preventDefault();var t=e.target,n=t.parentNode.parentNode.parentNode,o=m(e);t.reset(),s.modifyToDo(Number(n.id),o[0],o[1],o[2],o[3]),w.displayToDos(s.getToDoAry())},g=function(e){e.preventDefault();var t=e.target,n=t.parentNode,o=v();t.reset(),n.style.display="none",s.createProject(o[0],[],o[1],o[2]),w.displayProjects(s.getProjectAry())},C=function(e,t){e.preventDefault();var n=e.target,o=n.parentNode,d=f(n);n.reset(),o.style.display="none";var r=s.findProject(t);r.clearToDos(),d.forEach((function(e){r.addToDo(s.findTodDo(e))}))},E=function(e){e.preventDefault();var t=e.target,n=t.parentNode.parentNode.parentNode,o=h(e);t.reset(),s.modifyProject(Number(n.id),o[0],null,o[1],o[2]),w.displayProjects(s.getProjectAry())};var D,L,j,A,T,k,S,x,N;const I=(D=["Low","Standard","High"],L=["Normal","Urgent"],j=document.getElementById("content")||document.createElement("content"),A=function(e){var t=document.createElement("div");t.setAttribute("id","closebuttondiv");var n=document.createElement("button");return n.setAttribute("id","closebutton"),n.innerHTML='<span class="material-symbols-outlined">close</span>',n.addEventListener("click",(function(){e.style.display="none",j.classList.remove("blurred")})),t.appendChild(n),t},T=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.textContent=t,n},k=function(e,t,n){void 0===n&&(n=null);var o=document.createElement("div");o.classList.add("inputdiv"),o.appendChild(T("radiocontainer","Priority:"));var d=document.createElement("div");return d.classList.add("radiocontainer"),t.forEach((function(t){var o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("name",e),o.setAttribute("value",t),o.setAttribute("id",t),t===n&&o.setAttribute("checked","checked");var r=document.createElement("label");r.setAttribute("for",t),r.textContent=t[0].toUpperCase()+t.substring(1),d.appendChild(o),d.appendChild(r)})),o.appendChild(d),o},S=function(){var e=document.createElement("button");return e.setAttribute("type","submit"),e.setAttribute("id","todosubmit"),e.textContent="Add",e},x=function(e,t,n,o){void 0===o&&(o=!0);var d=document.createElement("div");return d.classList.add("inputdiv"),d.appendChild(T(t,n)),d.appendChild(function(e,t,n,o){void 0===n&&(n="empty");var d=document.createElement("input");return d.setAttribute("type",e),d.setAttribute("name",t),d.setAttribute("id",t),!0===o&&d.setAttribute("required","true"),"empty"!==n&&d.setAttribute("value",n),d}(e,t,"empty",o)),d},N=function(e,t,n,o,d){void 0===o&&(o=!0);var r=x(e,t,n,o);return r.querySelector("#".concat(t)).value=d,r},{buildForm:function(){var e=document.createElement("div");e.setAttribute("id","formdiv");var t=document.createElement("h2");t.classList.add("formheading"),t.textContent="Add a new ToDo";var n=document.createElement("form");return n.appendChild(x("text","todotitle","Title:")),n.appendChild(x("text","todocontent","Content (optional):",!1)),n.appendChild(x("date","tododate","Due date:")),n.appendChild(k("todopriority",D)),n.appendChild(S()),e.appendChild(A(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){y(e),j.classList.remove("blurred")})),e},buildToDoEditForm:function(e){var t=e.target,o=t.parentNode,d=o.parentNode.querySelector(".todocontent"),r=s.findTodDo(Number(t.getAttribute("objectid"))),i=r.heading,a=r.text,c=r.date,l=r.priority;d.innerHTML="",d.classList.add("duringedit"),d.classList.remove("todocontent");var u=document.createElement("form");u.classList.add("todocontent"),u.setAttribute("id","editform"),u.appendChild(N("text","todotitleedit","Title:",!0,i)),u.appendChild(N("text","todocontentedit","Content (optional):",!1,a)),u.appendChild(N("date","tododateedit","Due date:",!0,n(c))),u.appendChild(k("todopriorityedit",D,l)),d.appendChild(u),o.innerHTML="";var p=document.createElement("button");p.classList.add("cancelbutton"),p.innerHTML='<span class="material-symbols-outlined">undo</span>',p.addEventListener("click",(function(){w.displayToDos(s.getToDoAry())}));var m=document.createElement("button");m.classList.add("acceptbutton"),m.setAttribute("type","submit"),m.setAttribute("form","editform"),m.innerHTML='<span class="material-symbols-outlined">check</span>',u.addEventListener("submit",(function(e){b(e)})),o.appendChild(p),o.appendChild(m)},buildProjectEditForm:function(e){var t=e.target,o=t.parentNode,d=o.parentNode.querySelector(".projectcontent");console.log(d);var r=s.findProject(Number(t.getAttribute("objectid"))),i=r.name,a=r.date,c=r.priority;d.innerHTML="",d.classList.add("duringedit"),d.classList.remove("projectcontent");var l=document.createElement("form");l.classList.add("projectcontent"),l.setAttribute("id","editform"),l.appendChild(N("text","projectnameedit","Name:",!0,i)),l.appendChild(N("date","projectdateedit","Due date:",!0,n(a))),l.appendChild(k("projectpriorityedit",L,c)),d.appendChild(l),o.innerHTML="";var u=document.createElement("button");u.classList.add("cancelbutton"),u.innerHTML='<span class="material-symbols-outlined">undo</span>',u.addEventListener("click",(function(){w.displayProjects(s.getProjectAry())}));var p=document.createElement("button");p.classList.add("acceptbutton"),p.setAttribute("type","submit"),p.setAttribute("form","editform"),p.innerHTML='<span class="material-symbols-outlined">check</span>',l.addEventListener("submit",(function(e){E(e)})),o.appendChild(u),o.appendChild(p)},buildNewProjectForm:function(){var e=document.createElement("div");e.setAttribute("id","projectformdiv");var t=document.createElement("h2");t.classList.add("formheading"),t.textContent="Add a new Project";var n=document.createElement("form");return n.appendChild(x("text","projectname","Name:")),n.appendChild(x("date","projectdate","Due date:")),n.appendChild(k("projectpriority",L)),n.appendChild(S()),e.appendChild(A(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){g(e),j.classList.remove("blurred")})),e},buildAddProjectToDoForm:function(t,n,o){var d=document.createElement("div");d.setAttribute("id","projecttodosformdiv"),d.style.display="block";var r=document.createElement("h2");if(r.classList.add("formheading"),r.textContent="Add new ToDos to Project",d.appendChild(A(d)),d.appendChild(r),s.getToDoAry().length>0){var i=document.createElement("form"),a=s.findProject(n),c=document.createElement("div");c.classList.add("inputdiv"),c.appendChild(T("projectcheckboxdiv","Select ToDos:"));var l=s.getToDoAry().map((function(e){return e.iD})),u=document.createElement("div");u.classList.add("projectcheckboxdiv"),l.forEach((function(t){var n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id","todocheckbox".concat(t)),n.setAttribute("value","".concat(t)),n.setAttribute("name","projectcheckbox"),a.getToDos().filter((function(e){return e.iD===t})).length>0&&n.setAttribute("checked","true");var o=document.createElement("label");o.setAttribute("for","todocheckbox".concat(t));var d=document.createElement("div");d.textContent=s.findTodDo(t).heading;var r=document.createElement("div");r.classList.add("formtododate"),r.innerHTML='<span class="material-symbols-outlined">calendar_month</span> \n          '.concat(e(s.findTodDo(t).date)),o.appendChild(d),o.appendChild(r),u.appendChild(n),u.appendChild(o)})),c.appendChild(u),i.appendChild(c),i.appendChild(S()),d.appendChild(i),i.addEventListener("submit",(function(e){C(e,n),j.classList.remove("blurred"),o.remove();var t=document.getElementById(n.toString()).parentNode,d=document.createElement("div");d.style.display="block",d.classList.add("projecttododiv"),d.setAttribute("id","projecttododiv".concat(n));var r=w.createToDosDiv(n);d.appendChild(r),t.appendChild(d)}))}else{var p=document.createElement("div");p.textContent="There are no ToDos to add to this Project.",d.appendChild(p)}return d}});var P=function(){var n=document.getElementById("content")||document.createElement("content"),o=function(e){var t=document.createElement("div");t.classList.add("projecttodoscontainer");var o=s.findProject(e).getToDos();return t.appendChild(function(e,t,o){var d=document.createElement("div");if(d.classList.add("notodosdiv"),0===o){var r=document.createElement("div");r.classList.add("notodos"),r.textContent="No ToDos for this project yet",d.appendChild(r)}var i=document.createElement("button");return i.classList.add("addtodobutton"),i.textContent="Add ToDo",i.addEventListener("click",(function(o){n.appendChild(I.buildAddProjectToDoForm(o,e,t)),n.classList.add("blurred")})),d.appendChild(i),d}(e,t,o.length)),o.forEach((function(e){y(e,t)})),t},d=function(e,t){var n=document.createElement("button");return n.classList.add("editbutton"),n.setAttribute("objectid",e),n.innerHTML='<span class="material-symbols-outlined">edit</span>',n.addEventListener("click",(function(e){"project"===t?I.buildProjectEditForm(e):"todo"===t&&I.buildToDoEditForm(e)})),n},r=function(e,t){var n=document.createElement("button");return n.classList.add("deletebutton"),n.setAttribute("objectid",e),n.innerHTML='<span class="material-symbols-outlined">delete</span>',n.addEventListener("click",(function(e){var n=e.target,o=Number(n.getAttribute("objectid"));confirm("Are you sure you want to delete that?\n(This is an irreversible operation)")&&("project"===t?(s.deleteProject(o),E(s.getProjectAry())):"todo"===t&&(s.deleteToDo(o),g(s.getToDoAry())))})),n},i=function(){var e=document.createElement("div");return e.classList.add("checkbox"),e.innerHTML="&#10003",e.addEventListener("click",(function(e){var t=e.target.parentNode.parentNode,n=Number(t.id);s.moveToDone(n),g(s.getToDoAry())})),e},a=function(){var e=document.getElementById("addnewbutton"),t=document.getElementById("formdiv");e.addEventListener("click",(function(){t.style.display="block",n.classList.add("blurred")}))},c=function(e){var t=document.createElement("div");switch(t.classList.add("labelstripe"),e){case"Standard":t.style.backgroundColor="orange";break;case"Low":t.style.backgroundColor="blue";break;case"High":t.style.backgroundColor="red";break;case"Normal":t.style.backgroundColor="skyblue";break;case"Urgent":t.style.backgroundColor="crimson"}return t},l=function(){document.querySelectorAll(".navitem").forEach((function(e){e.addEventListener("click",(function(e){switch(e.target.id){case"homelink":P.homePageBuilder();break;case"donelink":P.donePageBuilder();break;case"projectslink":P.projectPageBuilder()}}))}))},u=function(n,o,d){var r=document.createElement("div");return r.classList.add("".concat(n,"content")),d.forEach((function(d){"date"===d?r.appendChild(function(n){var o=document.createElement("div");o.classList.add("tododate");var d=document.createElement("div");return d.innerHTML='<span class="material-symbols-outlined">calendar_month</span>',o.appendChild(d),o.appendChild(function(n,o){var d=document.createElement("div"),r=t(n);return 1===r?d.textContent=e(n)+" ("+t(n)+" day left)":r>=0?d.textContent=e(n)+" ("+t(n)+" days left)":-1===r?(o.classList.add("missedtodo"),d.textContent=e(n)+" ("+Math.abs(t(n))+" day ago)"):(o.classList.add("missedtodo"),d.textContent=e(n)+" ("+Math.abs(t(n))+" days ago)"),d}(n,o)),o}(o.date)):"priority"===d?r.appendChild(function(e){var t=document.createElement("div");t.classList.add("todopriority"),t.appendChild(function(e){var t=document.createElement("div");return t.classList.add("prioritycircle"),"Standard"===e?t.style.backgroundColor="orange":"Low"===e?t.style.backgroundColor="blue":"High"===e?t.style.backgroundColor="red":"Normal"===e?t.style.backgroundColor="skyblue":"Urgent"===e&&(t.style.backgroundColor="crimson"),t}(e));var n=document.createElement("div");return n.textContent=e+" priority",t.appendChild(n),t}(o.priority)):r.appendChild(function(e,t,n){var o=document.createElement("div");return o.classList.add("".concat(e).concat(n)),o.textContent=t[n],o}(n,o,d))})),r},p=function(e,t){var n=document.createElement("div");n.classList.add("navitem"),n.setAttribute("id","".concat(e,"link"));var o=e.charAt(0).toUpperCase()+e.slice(1);return n.innerHTML='<span class="material-symbols-outlined">'.concat(t,"</span> ").concat(o),n},m=function(){n.textContent=""},v=function(){var e,t,n=document.createElement("header");return n.setAttribute("id","header"),n.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","logodiv");var t=document.createElement("div");t.setAttribute("id","checkmark"),t.innerHTML="&#10003";var n=document.createElement("div");return n.setAttribute("id","logo"),n.textContent="To Do",e.appendChild(t),e.appendChild(n),e}()),n.appendChild(((e=document.createElement("div")).setAttribute("id","navigationdiv"),e.appendChild(p("home","house")),e.appendChild(p("done","done")),e.appendChild(p("projects","assignment")),e)),n.appendChild(((t=document.createElement("button")).setAttribute("id","addnewbutton"),t.textContent="Add ToDo",t)),n},f=function(e,t){m(),n.appendChild(v());var o=document.createElement("div");o.setAttribute("id","".concat(e,"div")),n.appendChild(o),n.appendChild(I.buildForm()),a(),document.getElementById("".concat(t,"link")).classList.add("active"),l()},h=function(e,t,n){void 0===n&&(n=!1);var o=e.iD.toString(),a=document.createElement("div");n?a.classList.add("donetodo"):a.classList.add("todo"),a.setAttribute("id",o),a.appendChild(c(e.priority));var l=document.createElement("div");l.classList.add("middlediv");var s,p,m=document.createElement("div");m.classList.add("checkboxdiv"),m.appendChild(i()),l.appendChild(m),l.appendChild(u("todo",e,["heading","text","date","priority"])),l.appendChild((s=o,(p=document.createElement("div")).classList.add("buttondiv"),p.appendChild(d(s,"todo")),p.appendChild(r(s,"todo")),p)),a.appendChild(l),t.appendChild(a)},y=function(e,t){var n=e.iD.toString(),o=document.createElement("div");o.classList.add("projecttodo"),o.setAttribute("id",n),o.appendChild(c(e.priority)),o.appendChild(u("todo",e,["heading","text","date","priority"])),t.appendChild(o)},b=function(e,t){var n=document.createElement("div");n.classList.add("projectcontainer");var a,l,s=document.createElement("div");s.classList.add("project"),s.setAttribute("id",e.iD.toString()),s.appendChild(c(e.priority)),s.appendChild(function(e){var t=document.createElement("div");t.classList.add("middlediv");var n,o,a=document.createElement("div");return a.classList.add("checkboxdiv"),a.appendChild(i()),t.appendChild(a),t.appendChild(u("project",e,["name","date","priority"])),t.appendChild((n=e.iD.toString(),(o=document.createElement("div")).classList.add("buttondiv"),o.appendChild(d(n,"project")),o.appendChild(r(n,"project")),o)),t}(e)),s.appendChild((a=e.iD,(l=document.createElement("div")).classList.add("expandbutton"),l.setAttribute("objectid",a.toString()),l.innerHTML='<span class="material-symbols-outlined">expand_more</span>',l.addEventListener("click",(function(){var e=document.getElementById(a.toString()),t=e.nextSibling;t.textContent="",t.appendChild(o(a)),"none"===t.style.display?(t.textContent="",t.appendChild(o(a)),t.style.display="block"):t.style.display="none",e.classList.toggle("expanded")})),l)),n.appendChild(s),n.appendChild(function(e){var t=document.createElement("div");return t.classList.add("projecttododiv"),t.setAttribute("objectid",e.iD.toString()),t.style.display="none",t}(e)),t.appendChild(n)},g=function(e){var t=document.getElementById("tododiv")||document.createElement("tododiv");if(document.getElementById("tododiv").textContent="",0===e.length){var o=document.createElement("div");return o.setAttribute("id","actiondiv"),o.innerHTML='No ToDos yet. Time to <span id="addnew">add a new one</span>.',o.querySelector("#addnew").addEventListener("click",(function(){document.getElementById("formdiv").style.display="block",n.classList.add("blurred")})),void t.appendChild(o)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return h(e,t)}))},C=function(e){document.getElementById("donediv").textContent="";var t=document.getElementById("donediv");if(0===e.length){var n=document.createElement("div");return n.setAttribute("id","actiondiv"),n.innerHTML="No ToDos marked as done.",void t.appendChild(n)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return h(e,t,!0)}))},E=function(e){document.getElementById("projectdiv").textContent="";var t=document.getElementById("projectdiv");if(0===e.length){var o=document.createElement("div");return o.setAttribute("id","actiondiv"),o.innerHTML='No Projects yet. Time to <span id="addnew">add a new one</span>.',o.querySelector("#addnew").addEventListener("click",(function(){document.getElementById("projectformdiv").style.display="block",n.classList.add("blurred")})),void t.appendChild(o)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return b(e,t)}))};return{homePageBuilder:function(){f("todo","home"),g(s.getToDoAry())},donePageBuilder:function(){f("done","done"),C(s.getDoneAry())},projectPageBuilder:function(){m();var e=document.createElement("div");if(e.setAttribute("id","projectdiv"),n.appendChild(v()),s.getProjectAry().length>0&&n.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","newprojectbuttondiv");var t=document.createElement("button");return t.setAttribute("id","newprojectbutton"),t.textContent="Add a new project",e.appendChild(t),e}()),n.appendChild(e),n.appendChild(I.buildForm()),n.appendChild(I.buildNewProjectForm()),a(),s.getProjectAry().length>0){var t=document.getElementById("newprojectbutton"),o=document.getElementById("projectformdiv");t.addEventListener("click",(function(){o.style.display="block",n.classList.add("blurred")}))}document.getElementById("projectslink").classList.add("active"),l(),E(s.getProjectAry())},displayToDos:g,displayDoneToDos:C,displayProjects:E,createToDosDiv:o}}();const w=P;s.loadArys(),w.homePageBuilder()})();
//# sourceMappingURL=main.js.map