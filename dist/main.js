(()=>{"use strict";const e=function(e){return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()},t=function(e){var t=e,n=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),d=t.getTime()-n.getTime();return Math.floor(d/864e5)},n=function(e){var t=String(e.getDate()).padStart(2,"0"),n=e.getMonth()+1;return e.getFullYear()+"-"+n+"-"+t},d=function(e,t,n,d,o){var r=!1;return{heading:e,text:t,date:n,priority:d,iD:o,markAsDone:function(){return r=!r},getDoneStatus:function(){return r}}};var o;const r=(o=JSON.parse(localStorage.getItem("idsary")||"[]"),{generateID:function(){for(;;){var e=Math.floor(1e4*Math.random());if(!o.includes(e))return o.push(e),localStorage.setItem("idsary",JSON.stringify(o)),e}},freeID:function(e){var t=o.indexOf(e);o.splice(t,1),localStorage.setItem("idsary",JSON.stringify(o))}}),i=function(e){return new Date(e)};var a,l,c,u=(a=[],l=[],c=[],{createToDo:function(e,t,n,o){var i=r.generateID(),l=d(e,t,n,o,i);return a.push(l),localStorage.setItem("todoary",JSON.stringify(a)),l},modifyToDo:function(e,t,n,d,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===d&&(d=null),void 0===o&&(o=null);var r=a.find((function(t){return t.iD===e}));null!==t&&(r.heading=t),null!==n&&(r.text=n),null!==d&&(r.date=d),null!==o&&(r.priority=o)},deleteToDo:function(e){var t=a.findIndex((function(t){return t.iD===e}));a.splice(t,1),localStorage.setItem("todoary",JSON.stringify(a)),r.freeID(e)},getToDoAry:function(){return a},loadArys:function(){JSON.parse(localStorage.getItem("todoary")||"[]").forEach((function(e){e.date=i(e.date),a.push(d(e.heading,e.text,e.date,e.priority,e.iD))})),(l=JSON.parse(localStorage.getItem("doneary")||"[]")).forEach((function(e){e.date=i(e.date)})),(c=JSON.parse(localStorage.getItem("projectary")||"[]")).forEach((function(e){e.date=i(e.date)}))},getDoneAry:function(){return l},moveToDone:function(e){var t=a.findIndex((function(t){return t.iD===e})),n=a.splice(t,1)[0];console.log(n),n.markAsDone(),localStorage.setItem("todoary",JSON.stringify(a)),l.push(n),localStorage.setItem("doneary",JSON.stringify(l))},findTodDo:function(e){return a.find((function(t){return t.iD===e}))},createProject:function(e,t,n,d){var o=function(e,t,n,d,o){return{iD:e,name:t,date:d,priority:o,toDos:n}}(r.generateID(),e,t,n,d);return c.push(o),localStorage.setItem("projectary",JSON.stringify(c)),o},modifyProject:function(e,t,n,d,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===d&&(d=null),void 0===o&&(o=null);var r=c.find((function(t){return t.iD===e}));null!==t&&(r.name=t),null!==n&&(r.toDos=n),null!==d&&(r.date=d),null!==o&&(r.priority=o)},getProjectAry:function(){return c},deleteProject:function(e){var t=c.findIndex((function(t){return t.iD===e}));c.splice(t,1),localStorage.setItem("projectary",JSON.stringify(c)),r.freeID(e)},findProject:function(e){return c.find((function(t){return t.iD===e}))}});const s=u,m=function(e){return[document.getElementById("todotitle").value,document.getElementById("todocontent").value,new Date(document.getElementById("tododate").value),document.querySelector('input[name="todopriority"]:checked').value]},p=function(e){var t=e.target,n=t.querySelector("#todotitleedit").value,d=t.querySelector("#todocontentedit").value,o=new Date(t.querySelector("#tododateedit").value),r=t.querySelector('input[name="todopriorityedit"]:checked').value;return t.reset(),[n,d,o,r]},v=function(e){var t=e.target,n=document.getElementById("projectname").value,d=new Date(document.getElementById("projectdate").value),o=document.querySelector('input[name="projectpriority"]:checked').value;return t.reset(),[n,d,o]},f=function(e){e.preventDefault();var t=e.target,n=t.parentNode,d=m(t);t.reset(),n.style.display="none",s.createToDo(d[0],d[1],d[2],d[3]),S.displayToDos(s.getToDoAry())},y=function(e){e.preventDefault();var t=e.target,n=t.parentNode.parentNode.parentNode,d=p(e);t.reset(),s.modifyToDo(Number(n.id),d[0],d[1],d[2],d[3]),S.displayToDos(s.getToDoAry())},g=function(e){e.preventDefault();var t=e.target,n=t.parentNode,d=v(e);t.reset(),n.style.display="none",s.createProject(d[0],null,d[1],d[2]),S.displayProjects(s.getProjectAry())};var b,h,C,E,L,D,A,k,T;const I=(b=["Low","Standard","High"],h=["Normal","Urgent"],C=document.getElementById("content")||document.createElement("content"),E=function(e){var t=document.createElement("div");t.setAttribute("id","closebuttondiv");var n=document.createElement("button");return n.setAttribute("id","closebutton"),n.innerHTML='<span class="material-symbols-outlined">close</span>',n.addEventListener("click",(function(){e.style.display="none",C.classList.remove("blurred")})),t.appendChild(n),t},L=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.textContent=t,n},D=function(e,t,n){void 0===n&&(n=null);var d=document.createElement("div");d.classList.add("inputdiv"),d.appendChild(L("radiocontainer","Priority:"));var o=document.createElement("div");return o.classList.add("radiocontainer"),t.forEach((function(t){var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name",e),d.setAttribute("value",t),d.setAttribute("id",t),t===n&&d.setAttribute("checked","checked");var r=document.createElement("label");r.setAttribute("for",t),r.textContent=t[0].toUpperCase()+t.substring(1),o.appendChild(d),o.appendChild(r)})),d.appendChild(o),d},A=function(){var e=document.createElement("button");return e.setAttribute("type","submit"),e.setAttribute("id","todosubmit"),e.textContent="Add",e},k=function(e,t,n,d){void 0===d&&(d=!0);var o=document.createElement("div");return o.classList.add("inputdiv"),o.appendChild(L(t,n)),o.appendChild(function(e,t,n,d){void 0===n&&(n="empty");var o=document.createElement("input");return o.setAttribute("type",e),o.setAttribute("name",t),o.setAttribute("id",t),!0===d&&o.setAttribute("required","true"),"empty"!==n&&o.setAttribute("value",n),o}(e,t,"empty",d)),o},T=function(e,t,n,d,o){void 0===d&&(d=!0);var r=k(e,t,n,d);return r.querySelector("#".concat(t)).value=o,r},{buildForm:function(){var e=document.createElement("div");e.setAttribute("id","formdiv");var t=document.createElement("h2");t.setAttribute("id","formheading"),t.textContent="Add a new ToDo";var n=document.createElement("form");return n.appendChild(k("text","todotitle","Title:")),n.appendChild(k("text","todocontent","Content (optional):",!1)),n.appendChild(k("date","tododate","Due date:")),n.appendChild(D("todopriority",b)),n.appendChild(A()),e.appendChild(E(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){f(e),C.classList.remove("blurred")})),e},buildEditForm:function(e){var t=e.target,d=t.parentNode,o=d.parentNode.querySelector(".todocontent");console.log(o);var r=s.findTodDo(Number(t.getAttribute("objectid"))),i=r.heading,a=r.text,l=r.date,c=r.priority;o.innerHTML="",o.classList.add("duringedit"),o.classList.remove("todocontent");var u=document.createElement("form");u.classList.add("todocontent"),u.setAttribute("id","editform"),u.appendChild(T("text","todotitleedit","Title:",!0,i)),u.appendChild(T("text","todocontentedit","Content (optional):",!1,a)),u.appendChild(T("date","tododateedit","Due date:",!0,n(l))),u.appendChild(D("todopriorityedit",b,c)),o.appendChild(u),d.innerHTML="";var m=document.createElement("button");m.classList.add("cancelbutton"),m.innerHTML='<span class="material-symbols-outlined">undo</span>',m.addEventListener("click",(function(){S.displayToDos(s.getToDoAry())}));var p=document.createElement("button");p.classList.add("acceptbutton"),p.setAttribute("type","submit"),p.setAttribute("form","editform"),p.innerHTML='<span class="material-symbols-outlined">check</span>',u.addEventListener("submit",(function(e){y(e)})),d.appendChild(m),d.appendChild(p)},buildNewProjectForm:function(){var e=document.createElement("div");e.setAttribute("id","projectformdiv");var t=document.createElement("h2");t.setAttribute("id","formheading"),t.textContent="Add a new Project";var n=document.createElement("form");return n.appendChild(k("text","projectname","Name:")),n.appendChild(k("date","projectdate","Due date:")),n.appendChild(D("projectpriority",h)),n.appendChild(A()),e.appendChild(E(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){g(e),C.classList.remove("blurred")})),e}});var j=function(){var n=document.getElementById("content")||document.createElement("content"),d=function(n){var d=document.createElement("div");d.classList.add("tododate");var o=document.createElement("div");o.innerHTML='<span class="material-symbols-outlined">calendar_month</span>';var r=document.createElement("div"),i=t(n);return 1===i?r.textContent=e(n)+" ("+t(n)+" day left)":i>=0?r.textContent=e(n)+" ("+t(n)+" days left)":-1===i?(d.classList.add("missedtodo"),r.textContent=e(n)+" ("+Math.abs(t(n))+" day ago)"):(d.classList.add("missedtodo"),r.textContent=e(n)+" ("+Math.abs(t(n))+" days ago)"),d.appendChild(o),d.appendChild(r),d},o=function(e){var t=document.createElement("div");t.classList.add("todopriority");var n=document.createElement("div");n.classList.add("prioritycircle"),"Standard"===e?n.style.backgroundColor="orange":"Low"===e?n.style.backgroundColor="blue":"High"===e?n.style.backgroundColor="red":"Normal"===e?n.style.backgroundColor="skyblue":"Urgent"===e&&(n.style.backgroundColor="crimson");var d=document.createElement("div");return d.textContent=e+" priority",t.appendChild(n),t.appendChild(d),t},r=function(){var e=document.createElement("div");return e.classList.add("checkbox"),e.innerHTML="&#10003",e.addEventListener("click",(function(e){var t=e.target.parentNode.parentNode,n=Number(t.id);s.moveToDone(n),p(s.getToDoAry())})),e},i=function(e){var t=document.createElement("div");return t.classList.add("labelstripe"),"Standard"===e?t.style.backgroundColor="orange":"Low"===e?t.style.backgroundColor="blue":"High"===e?t.style.backgroundColor="red":"Normal"===e?t.style.backgroundColor="skyblue":"Urgent"===e&&(t.style.backgroundColor="crimson"),t},a=function(){document.querySelectorAll(".navitem").forEach((function(e){e.addEventListener("click",(function(e){switch(e.target.id){case"homepagelink":j.homePageBuilder();break;case"donelink":j.donePageBuilder();break;case"projectlink":j.projectPageBuilder()}}))}))},l=function(){n.textContent=""},c=function(e){var t=document.createElement("div");t.classList.add("buttondiv");var n=document.createElement("button");n.classList.add("editbutton"),n.setAttribute("objectid",e),n.innerHTML='<span class="material-symbols-outlined">edit</span>',n.addEventListener("click",(function(e){I.buildEditForm(e)}));var d=document.createElement("button");return d.classList.add("deletebutton"),d.setAttribute("objectid",e),d.innerHTML='<span class="material-symbols-outlined">delete</span>',d.addEventListener("click",(function(e){var t=e.target,n=Number(t.getAttribute("objectid"));confirm("Are you sure you want to delete that?\n(This is an irreversible operation)")&&(s.deleteToDo(n),p(s.getToDoAry()))})),t.appendChild(n),t.appendChild(d),t},u=function(){var e=document.createElement("header");e.setAttribute("id","header"),e.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","logodiv");var t=document.createElement("div");t.setAttribute("id","checkmark"),t.innerHTML="&#10003";var n=document.createElement("div");return n.setAttribute("id","logo"),n.textContent="To Do",e.appendChild(t),e.appendChild(n),e}()),e.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","navigationdiv");var t=document.createElement("div");t.classList.add("navitem"),t.setAttribute("id","homepagelink"),t.innerHTML='<span class="material-symbols-outlined">house</span> Homepage';var n=document.createElement("div");n.innerHTML='<span class="material-symbols-outlined">done</span> Done',n.classList.add("navitem"),n.setAttribute("id","donelink");var d=document.createElement("div");return d.classList.add("navitem"),d.setAttribute("id","projectlink"),d.innerHTML='<span class="material-symbols-outlined">assignment</span> Projects',e.appendChild(t),e.appendChild(n),e.appendChild(d),e}());var t=document.createElement("button");return t.setAttribute("id","addnewbutton"),t.textContent="Add ToDo",e.appendChild(t),e},m=function(e,t,n){void 0===n&&(n=!1);var a=e.iD.toString(),l=document.createElement("div");!1===n?l.classList.add("todo"):l.classList.add("donetodo"),l.setAttribute("id",a),l.appendChild(i(e.priority));var u=document.createElement("div");u.classList.add("middlediv");var s=document.createElement("div");s.classList.add("checkboxdiv"),s.appendChild(r()),u.appendChild(s),u.appendChild(function(e){var t=document.createElement("div");t.classList.add("todocontent");var n=document.createElement("div");n.classList.add("todoheader"),n.textContent=e.heading;var r=document.createElement("div");return r.classList.add("todotext"),r.textContent=e.text,t.appendChild(n),t.appendChild(r),t.appendChild(d(e.date)),t.appendChild(o(e.priority)),t}(e)),u.appendChild(c(a)),l.appendChild(u),t.appendChild(l)},p=function(e){var t=document.getElementById("tododiv")||document.createElement("tododiv");if(document.getElementById("tododiv").textContent="",0===e.length){var d=document.createElement("div");return d.setAttribute("id","actiondiv"),d.innerHTML='No ToDos yet. Time to <span id="addnew">add a new one</span>.',d.querySelector("#addnew").addEventListener("click",(function(){document.getElementById("formdiv").style.display="block",n.classList.add("blurred")})),void t.appendChild(d)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return m(e,t)}))},v=function(e){document.getElementById("donediv").textContent="";var t=document.getElementById("donediv");e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return m(e,t,!0)}))},f=function(e){var t=document.getElementById("projectdiv");document.getElementById("projectdiv").textContent="",e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return function(e,t){var n=document.createElement("div");n.classList.add("project"),n.setAttribute("id",e.iD.toString());var a=document.createElement("div");a.classList.add("middlediv");var l,u=document.createElement("div");u.classList.add("checkboxdiv"),u.appendChild(r()),n.appendChild(i(e.priority)),a.appendChild(u),a.appendChild(function(e){var t=document.createElement("div");t.classList.add("projectcontent");var n=document.createElement("div");return n.classList.add("projectname"),n.textContent=e.name,t.appendChild(n),t.appendChild(d(e.date)),t.appendChild(o(e.priority)),t}(e)),a.appendChild(c(e.iD.toString())),n.appendChild(a),n.appendChild(((l=document.createElement("div")).classList.add("expandbutton"),l.innerHTML='<span class="material-symbols-outlined">expand_more</span>',l.addEventListener("click",(function(e){e.target})),l)),t.appendChild(n)}(e,t)}))};return{homePageBuilder:function(){l();var e=document.createElement("div");e.setAttribute("id","tododiv"),n.appendChild(u()),n.appendChild(e),n.appendChild(I.buildForm());var t=document.getElementById("addnewbutton"),d=document.getElementById("formdiv");t.addEventListener("click",(function(){d.style.display="block",n.classList.add("blurred")})),document.getElementById("homepagelink").classList.add("active"),a(),p(s.getToDoAry())},donePageBuilder:function(){l();var e=document.createElement("div");e.setAttribute("id","donediv"),n.appendChild(u()),n.appendChild(e),n.appendChild(I.buildForm());var t=document.getElementById("addnewbutton"),d=document.getElementById("formdiv");t.addEventListener("click",(function(){d.style.display="block",n.classList.add("blurred")})),document.getElementById("donelink").classList.add("active"),a(),v(s.getDoneAry())},projectPageBuilder:function(){l();var e=document.createElement("div");e.setAttribute("id","projectdiv"),n.appendChild(u()),n.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","newprojectbuttondiv");var t=document.createElement("button");return t.setAttribute("id","newprojectbutton"),t.textContent="Add new Project",e.appendChild(t),e}()),n.appendChild(e),n.appendChild(I.buildForm()),n.appendChild(I.buildNewProjectForm());var t=document.getElementById("addnewbutton"),d=document.getElementById("formdiv");t.addEventListener("click",(function(){d.style.display="block",n.classList.add("blurred")}));var o=document.getElementById("newprojectbutton"),r=document.getElementById("projectformdiv");o.addEventListener("click",(function(){r.style.display="block",n.classList.add("blurred")})),document.getElementById("projectlink").classList.add("active"),a(),f(s.getProjectAry())},displayToDos:p,displayDoneToDos:v,displayProjects:f}}();const S=j;s.loadArys(),S.homePageBuilder()})();
//# sourceMappingURL=main.js.map