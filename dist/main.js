(()=>{"use strict";const e=function(e){return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()},t=function(e){var t=e,n=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),d=t.getTime()-n.getTime();return Math.floor(d/864e5)},n=function(e){var t=String(e.getDate()).padStart(2,"0"),n=e.getMonth()+1;return e.getFullYear()+"-"+n+"-"+t},d=function(e,t,n,d,o){var r=!1;return{heading:e,text:t,date:n,priority:d,iD:o,markAsDone:function(){return r=!r},getDoneStatus:function(){return r}}};var o;const r=(o=JSON.parse(localStorage.getItem("idsary")||"[]"),{generateID:function(){for(;;){var e=Math.floor(1e4*Math.random());if(!o.includes(e))return o.push(e),localStorage.setItem("idsary",JSON.stringify(o)),e}},freeID:function(e){var t=o.indexOf(e);o.splice(t,1),localStorage.setItem("idsary",JSON.stringify(o))}}),i=function(e){return new Date(e)};var a,l;const c=(a=[],l=[],{createToDo:function(e,t,n,o){var i=r.generateID(),l=d(e,t,n,o,i);return a.push(l),localStorage.setItem("todoary",JSON.stringify(a)),l},modifyToDo:function(e,t,n,d,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===d&&(d=null),void 0===o&&(o=null);var r=a.find((function(t){return t.iD===e}));null!==t&&(r.heading=t),null!==n&&(r.text=n),null!==d&&(r.date=d),null!==o&&(r.priority=o)},deleteToDo:function(e){var t=a.findIndex((function(t){return t.iD===e}));a.splice(t,1),localStorage.setItem("todoary",JSON.stringify(a)),r.freeID(e)},getToDoAry:function(){return a},loadArys:function(){JSON.parse(localStorage.getItem("todoary")||"[]").forEach((function(e){e.date=i(e.date),a.push(d(e.heading,e.text,e.date,e.priority,e.iD))})),(l=JSON.parse(localStorage.getItem("doneary")||"[]")).forEach((function(e){e.date=i(e.date)}))},getDoneAry:function(){return l},moveToDone:function(e){var t=a.findIndex((function(t){return t.iD===e})),n=a.splice(t,1)[0];console.log(n),n.markAsDone(),localStorage.setItem("todoary",JSON.stringify(a)),a.push(n),localStorage.setItem("doneary",JSON.stringify(a))},findTodDo:function(e){return a.find((function(t){return t.iD===e}))}}),u=function(e){e.preventDefault();var t=e.target,n=t.parentNode,d=document.getElementById("todotitle").value,o=document.getElementById("todocontent").value,r=new Date(document.getElementById("tododate").value),i=document.querySelector('input[name="todopriority"]:checked').value;return t.reset(),n.style.display="none",[d,o,r,i]},s=function(e){var t=u(e);c.createToDo(t[0],t[1],t[2],t[3]),C.displayToDos(c.getToDoAry())};var m,p,v,f,h,y;const g=(m=["Low","Standard","High"],p=document.getElementById("content")||document.createElement("content"),v=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.textContent=t,n},f=function(e,t,n){void 0===n&&(n=null);var d=document.createElement("div");d.classList.add("inputdiv"),d.appendChild(v("radiocontainer","Priority:"));var o=document.createElement("div");return o.setAttribute("id","radiocontainer"),t.forEach((function(t){var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name",e),d.setAttribute("value",t),d.setAttribute("id",t),t===n&&d.setAttribute("checked","checked");var r=document.createElement("label");r.setAttribute("for",t),r.textContent=t[0].toUpperCase()+t.substring(1),o.appendChild(d),o.appendChild(r)})),d.appendChild(o),d},h=function(e,t,n,d){void 0===d&&(d=!0);var o=document.createElement("div");return o.classList.add("inputdiv"),o.appendChild(v(t,n)),o.appendChild(function(e,t,n,d){void 0===n&&(n="empty");var o=document.createElement("input");return o.setAttribute("type",e),o.setAttribute("name",t),o.setAttribute("id",t),!0===d&&o.setAttribute("required","true"),"empty"!==n&&o.setAttribute("value",n),o}(e,t,"empty",d)),o},y=function(e,t,n,d,o){void 0===d&&(d=!0);var r=h(e,t,n,d);return r.querySelector("#".concat(t)).value=o,r},{buildForm:function(){var e=document.createElement("div");e.setAttribute("id","formdiv");var t=document.createElement("h2");t.setAttribute("id","formheading"),t.textContent="Add a new ToDo";var n,d=document.createElement("form");return d.appendChild(h("text","todotitle","Title:")),d.appendChild(h("text","todocontent","Content (optional):",!1)),d.appendChild(h("date","tododate","Due date:")),d.appendChild(f("todopriority",m)),d.appendChild(((n=document.createElement("button")).setAttribute("type","submit"),n.setAttribute("id","todosubmit"),n.textContent="Add",n)),e.appendChild(function(e){var t=document.createElement("div");t.setAttribute("id","closebuttondiv");var n=document.createElement("button");return n.setAttribute("id","closebutton"),n.innerHTML='<span class="material-symbols-outlined">close</span>',n.addEventListener("click",(function(){e.style.display="none",p.classList.remove("blurred")})),t.appendChild(n),t}(e)),e.appendChild(t),e.appendChild(d),d.addEventListener("submit",(function(e){s(e),p.classList.remove("blurred")})),e},buildEditForm:function(e){var t=e.target.parentNode.parentNode,d=t.querySelector(".todocontent"),o=c.findTodDo(Number(t.id)),r=o.heading,i=o.text,a=o.date,l=o.priority;d.innerHTML="",d.appendChild(y("text","todotitleedit","Title:",!0,r)),d.appendChild(y("text","todocontentedit","Content (optional):",!1,i)),d.appendChild(y("date","tododateedit","Due date:",!0,n(a))),d.appendChild(f("todopriorityedit",m,l))}});var b=function(){var n=document.getElementById("content")||document.createElement("content"),d=function(n,d,r){void 0===r&&(r=!1);var i,a,l=document.createElement("div");!1===r?l.classList.add("todo"):l.classList.add("donetodo"),l.setAttribute("id",n.iD.toString()),l.appendChild((i=n.priority,(a=document.createElement("div")).classList.add("labelstripe"),"Standard"===i?a.style.backgroundColor="orange":"Low"===i?a.style.backgroundColor="blue":"High"===i&&(a.style.backgroundColor="red"),a));var u,s=document.createElement("div");s.classList.add("checkboxdiv"),s.appendChild(((u=document.createElement("div")).classList.add("checkbox"),u.innerHTML="&#10003",u.addEventListener("click",(function(e){var t=e.target,n=t.parentNode,d=t.cloneNode(!0);n.replaceChild(d,t);var o=n.parentNode,r=Number(o.id);c.moveToDone(r),o.remove(),o.classList.remove("todo"),o.classList.add("donetodo"),document.getElementById("donediv").appendChild(o)})),u)),l.appendChild(s),l.appendChild(function(n){var d=document.createElement("div");d.classList.add("todocontent");var o=document.createElement("div");o.classList.add("todoheader"),o.textContent=n.heading;var r=document.createElement("div");return r.classList.add("todotext"),r.textContent=n.text,d.appendChild(o),d.appendChild(r),d.appendChild(function(n){var d=document.createElement("div");d.classList.add("tododate");var o=document.createElement("div");o.innerHTML='<span class="material-symbols-outlined">calendar_month</span>';var r=document.createElement("div");return t(n)>=0?r.textContent=e(n)+" ("+t(n)+" days left)":(d.classList.add("missedtodo"),r.textContent=e(n)+" ("+Math.abs(t(n))+" days ago)"),d.appendChild(o),d.appendChild(r),d}(n.date)),d.appendChild(function(e){var t=document.createElement("div");t.classList.add("todopriority");var n=document.createElement("div");n.classList.add("prioritycircle"),"Standard"===e?n.style.backgroundColor="orange":"Low"===e?n.style.backgroundColor="blue":"High"===e&&(n.style.backgroundColor="red");var d=document.createElement("div");return d.textContent=e+" priority",t.appendChild(n),t.appendChild(d),t}(n.priority)),d}(n)),l.appendChild(function(){var e=document.createElement("div");e.classList.add("buttondiv");var t=document.createElement("button");t.classList.add("editbutton"),t.innerHTML='<span class="material-symbols-outlined">edit</span>',t.addEventListener("click",(function(e){g.buildEditForm(e)}));var n=document.createElement("button");return n.classList.add("deletebutton"),n.innerHTML='<span class="material-symbols-outlined">delete</span>',n.addEventListener("click",(function(e){var t=e.target.parentNode.parentNode,n=Number(t.id);confirm("Are you sure you want to delete that?\n(This is an irreversible operation)")&&(c.deleteToDo(n),o(c.getToDoAry()))})),e.appendChild(t),e.appendChild(n),e}()),d.appendChild(l)},o=function(e){var t=document.getElementById("tododiv")||document.createElement("tododiv");if(document.getElementById("tododiv").textContent="",0===e.length){var o=document.createElement("div");return o.setAttribute("id","actiondiv"),o.innerHTML='No ToDos yet. Time to <span id="addnew">add a new one</span>.',o.querySelector("#addnew").addEventListener("click",(function(){document.getElementById("formdiv").style.display="block",n.classList.add("blurred")})),void t.appendChild(o)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return d(e,t)}))};return{homePageBuilder:function(){var e=document.createElement("div");e.setAttribute("id","header");var t=document.createElement("div");t.setAttribute("id","tododiv"),e.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","logodiv");var t=document.createElement("div");t.setAttribute("id","checkmark"),t.innerHTML="&#10003";var n=document.createElement("div");return n.setAttribute("id","logo"),n.textContent="To Do",e.appendChild(t),e.appendChild(n),e}());var d=document.createElement("button");d.setAttribute("id","addnewbutton"),d.textContent="Add ToDo",e.appendChild(d);var o=document.createElement("div");o.setAttribute("id","doneheader"),o.textContent="Done";var r=document.createElement("div");r.setAttribute("id","donediv"),n.appendChild(e),n.appendChild(t),n.appendChild(o),n.appendChild(r),n.appendChild(g.buildForm());var i=document.getElementById("formdiv");d.addEventListener("click",(function(){i.style.display="block",n.classList.add("blurred")}))},toDoBuilder:d,displayToDos:o,displayDoneToDos:function(e){document.getElementById("donediv").textContent="";var t=document.getElementById("donediv");e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return d(e,t,!0)}))}}}();const C=b;C.homePageBuilder(),c.loadArys(),C.displayToDos(c.getToDoAry()),C.displayDoneToDos(c.getDoneAry())})();
//# sourceMappingURL=main.js.map