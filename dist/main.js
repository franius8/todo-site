(()=>{"use strict";const e=function(e){return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()},t=function(e){var t=e,n=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),d=t.getTime()-n.getTime();return Math.floor(d/864e5)},n=function(e){var t=String(e.getDate()).padStart(2,"0"),n=e.getMonth()+1;return e.getFullYear()+"-"+n+"-"+t},d=function(e,t,n,d,o,r,i){void 0===i&&(i=!1);var a=i;return{heading:e,text:t,date:n,priority:d,iD:o,projectiDs:r,markAsDone:function(){return a=!a},getDoneStatus:function(){return a}}},o=function(e,t,n,d,o){var r=n;return{iD:e,name:t,date:d,priority:o,toDos:n,addToDo:function(e){r.push(e),s.updateProjectAry()},clearToDos:function(){r=[],s.updateProjectAry()},getToDos:function(){return r},setToDos:function(e){return r=e}}};var r;const i=(r=JSON.parse(localStorage.getItem("idsary")||"[]"),{generateID:function(){for(;;){var e=Math.floor(1e4*Math.random());if(!r.includes(e))return r.push(e),localStorage.setItem("idsary",JSON.stringify(r)),e}},freeID:function(e){var t=r.indexOf(e);r.splice(t,1),localStorage.setItem("idsary",JSON.stringify(r))}}),a=function(e){return new Date(e)};var c,l,u;const s=(c=[],l=[],u=[],{createToDo:function(e,t,n,o){var r=i.generateID(),a=d(e,t,n,o,r,[]);return c.push(a),localStorage.setItem("todoary",JSON.stringify(c)),a},modifyToDo:function(e,t,n,d,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===d&&(d=null),void 0===o&&(o=null);var r=c.find((function(t){return t.iD===e}));null!==t&&(r.heading=t),null!==n&&(r.text=n),null!==d&&(r.date=d),null!==o&&(r.priority=o)},deleteToDo:function(e){var t=c.find((function(t){return t.iD===e}));t.projectiDs.length>0&&t.projectiDs.forEach((function(e){var n=u.find((function(t){return t.iD===e})),d=n.getToDos().indexOf(t);n.toDos.splice(d,1)}));var n=c.findIndex((function(t){return t.iD===e}));c.splice(n,1),localStorage.setItem("todoary",JSON.stringify(c)),i.freeID(e)},getToDoAry:function(){return c},loadArys:function(){JSON.parse(localStorage.getItem("todoary")||"[]").forEach((function(e){e.date=a(e.date),c.push(d(e.heading,e.text,e.date,e.priority,e.iD,e.projectiDs))})),JSON.parse(localStorage.getItem("doneary")||"[]").forEach((function(e){e.date=a(e.date),l.push(d(e.heading,e.text,e.date,e.priority,e.iD,e.projectiDs,!0))})),JSON.parse(localStorage.getItem("projectary")||"[]").forEach((function(e){e.date=a(e.date),e.toDos.forEach((function(e){return e.date=a(e.date),e})),u.push(o(e.iD,e.name,e.toDos,e.date,e.priority))}))},getDoneAry:function(){return l},moveToDone:function(e){var t=c.findIndex((function(t){return t.iD===e})),n=c.splice(t,1)[0];console.log(n),n.markAsDone(),localStorage.setItem("todoary",JSON.stringify(c)),l.push(n),localStorage.setItem("doneary",JSON.stringify(l))},findTodDo:function(e){return c.find((function(t){return t.iD===e}))},createProject:function(e,t,n,d){var r=i.generateID(),a=o(r,e,t,n,d);return u.push(a),localStorage.setItem("projectary",JSON.stringify(u)),a},modifyProject:function(e,t,n,d,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===d&&(d=null),void 0===o&&(o=null);var r=u.find((function(t){return t.iD===e}));null!==t&&(r.name=t),null!==n&&r.setToDos(n),null!==d&&(r.date=d),null!==o&&(r.priority=o)},getProjectAry:function(){return u},deleteProject:function(e){var t=u.findIndex((function(t){return t.iD===e}));u.splice(t,1),localStorage.setItem("projectary",JSON.stringify(u)),i.freeID(e)},findProject:function(e){return u.find((function(t){return t.iD===e}))},updateProjectAry:function(){localStorage.setItem("projectary",JSON.stringify(u))}}),p=function(e){return[document.getElementById("todotitle").value,document.getElementById("todocontent").value,new Date(document.getElementById("tododate").value),document.querySelector('input[name="todopriority"]:checked').value]},m=function(e){var t=e.target,n=t.querySelector("#todotitleedit").value,d=t.querySelector("#todocontentedit").value,o=new Date(t.querySelector("#tododateedit").value),r=t.querySelector('input[name="todopriorityedit"]:checked').value;return t.reset(),[n,d,o,r]},v=function(e){var t=e.target,n=document.getElementById("projectname").value,d=new Date(document.getElementById("projectdate").value),o=document.querySelector('input[name="projectpriority"]:checked').value;return t.reset(),[n,d,o]},f=function(e){var t=e.querySelectorAll('input[name="projectcheckbox"]:checked'),n=Array.from(t).map((function(e){return Number(e.value)}));return console.log(n),n},h=function(e){e.preventDefault();var t=e.target,n=t.parentNode,d=p(t);t.reset(),n.style.display="none",s.createToDo(d[0],d[1],d[2],d[3]),N.displayToDos(s.getToDoAry())},y=function(e){e.preventDefault();var t=e.target,n=t.parentNode.parentNode.parentNode,d=m(e);t.reset(),s.modifyToDo(Number(n.id),d[0],d[1],d[2],d[3]),N.displayToDos(s.getToDoAry())},g=function(e){e.preventDefault();var t=e.target,n=t.parentNode,d=v(e);t.reset(),n.style.display="none",s.createProject(d[0],[],d[1],d[2]),N.displayProjects(s.getProjectAry())},b=function(e,t){e.preventDefault();var n=e.target,d=n.parentNode,o=f(n);n.reset(),d.style.display="none";var r=s.findProject(t);r.clearToDos(),o.forEach((function(e){r.addToDo(s.findTodDo(e))}))};var C,E,D,L,A,T,j,k,x;const S=(C=["Low","Standard","High"],E=["Normal","Urgent"],D=document.getElementById("content")||document.createElement("content"),L=function(e){var t=document.createElement("div");t.setAttribute("id","closebuttondiv");var n=document.createElement("button");return n.setAttribute("id","closebutton"),n.innerHTML='<span class="material-symbols-outlined">close</span>',n.addEventListener("click",(function(){e.style.display="none",D.classList.remove("blurred")})),t.appendChild(n),t},A=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.textContent=t,n},T=function(e,t,n){void 0===n&&(n=null);var d=document.createElement("div");d.classList.add("inputdiv"),d.appendChild(A("radiocontainer","Priority:"));var o=document.createElement("div");return o.classList.add("radiocontainer"),t.forEach((function(t){var d=document.createElement("input");d.setAttribute("type","radio"),d.setAttribute("name",e),d.setAttribute("value",t),d.setAttribute("id",t),t===n&&d.setAttribute("checked","checked");var r=document.createElement("label");r.setAttribute("for",t),r.textContent=t[0].toUpperCase()+t.substring(1),o.appendChild(d),o.appendChild(r)})),d.appendChild(o),d},j=function(){var e=document.createElement("button");return e.setAttribute("type","submit"),e.setAttribute("id","todosubmit"),e.textContent="Add",e},k=function(e,t,n,d){void 0===d&&(d=!0);var o=document.createElement("div");return o.classList.add("inputdiv"),o.appendChild(A(t,n)),o.appendChild(function(e,t,n,d){void 0===n&&(n="empty");var o=document.createElement("input");return o.setAttribute("type",e),o.setAttribute("name",t),o.setAttribute("id",t),!0===d&&o.setAttribute("required","true"),"empty"!==n&&o.setAttribute("value",n),o}(e,t,"empty",d)),o},x=function(e,t,n,d,o){void 0===d&&(d=!0);var r=k(e,t,n,d);return r.querySelector("#".concat(t)).value=o,r},{buildForm:function(){var e=document.createElement("div");e.setAttribute("id","formdiv");var t=document.createElement("h2");t.classList.add("formheading"),t.textContent="Add a new ToDo";var n=document.createElement("form");return n.appendChild(k("text","todotitle","Title:")),n.appendChild(k("text","todocontent","Content (optional):",!1)),n.appendChild(k("date","tododate","Due date:")),n.appendChild(T("todopriority",C)),n.appendChild(j()),e.appendChild(L(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){h(e),D.classList.remove("blurred")})),e},buildEditForm:function(e){var t=e.target,d=t.parentNode,o=d.parentNode.querySelector(".todocontent"),r=s.findTodDo(Number(t.getAttribute("objectid"))),i=r.heading,a=r.text,c=r.date,l=r.priority;o.innerHTML="",o.classList.add("duringedit"),o.classList.remove("todocontent");var u=document.createElement("form");u.classList.add("todocontent"),u.setAttribute("id","editform"),u.appendChild(x("text","todotitleedit","Title:",!0,i)),u.appendChild(x("text","todocontentedit","Content (optional):",!1,a)),u.appendChild(x("date","tododateedit","Due date:",!0,n(c))),u.appendChild(T("todopriorityedit",C,l)),o.appendChild(u),d.innerHTML="";var p=document.createElement("button");p.classList.add("cancelbutton"),p.innerHTML='<span class="material-symbols-outlined">undo</span>',p.addEventListener("click",(function(){N.displayToDos(s.getToDoAry())}));var m=document.createElement("button");m.classList.add("acceptbutton"),m.setAttribute("type","submit"),m.setAttribute("form","editform"),m.innerHTML='<span class="material-symbols-outlined">check</span>',u.addEventListener("submit",(function(e){y(e)})),d.appendChild(p),d.appendChild(m)},buildNewProjectForm:function(){var e=document.createElement("div");e.setAttribute("id","projectformdiv");var t=document.createElement("h2");t.classList.add("formheading"),t.textContent="Add a new Project";var n=document.createElement("form");return n.appendChild(k("text","projectname","Name:")),n.appendChild(k("date","projectdate","Due date:")),n.appendChild(T("projectpriority",E)),n.appendChild(j()),e.appendChild(L(e)),e.appendChild(t),e.appendChild(n),n.addEventListener("submit",(function(e){g(e),D.classList.remove("blurred")})),e},buildAddProjectToDoForm:function(t,n,d){var o=document.createElement("div");o.setAttribute("id","projecttodosformdiv"),o.style.display="block";var r=document.createElement("h2");if(r.classList.add("formheading"),r.textContent="Add new ToDos to Project",o.appendChild(L(o)),o.appendChild(r),s.getToDoAry().length>0){var i=document.createElement("form"),a=s.findProject(n),c=document.createElement("div");c.classList.add("inputdiv"),c.appendChild(A("projectcheckboxdiv","Select ToDos:"));var l=s.getToDoAry().map((function(e){return e.iD})),u=document.createElement("div");u.classList.add("projectcheckboxdiv"),l.forEach((function(t){var n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id","todocheckbox".concat(t)),n.setAttribute("value","".concat(t)),n.setAttribute("name","projectcheckbox"),a.getToDos().filter((function(e){return e.iD===t})).length>0&&n.setAttribute("checked","true");var d=document.createElement("label");d.setAttribute("for","todocheckbox".concat(t));var o=document.createElement("div");o.textContent=s.findTodDo(t).heading;var r=document.createElement("div");r.classList.add("formtododate"),r.innerHTML='<span class="material-symbols-outlined">calendar_month</span> \n          '.concat(e(s.findTodDo(t).date)),d.appendChild(o),d.appendChild(r),u.appendChild(n),u.appendChild(d)})),c.appendChild(u),i.appendChild(c),i.appendChild(j()),o.appendChild(i),i.addEventListener("submit",(function(e){b(e,n),D.classList.remove("blurred"),d.remove();var t=document.getElementById(n.toString()).parentNode,o=document.createElement("div");o.style.display="block",o.classList.add("projecttododiv"),o.setAttribute("id","projecttododiv".concat(n));var r=N.createToDosDiv(n);o.appendChild(r),t.appendChild(o)}))}else{var p=document.createElement("div");p.textContent="There are no ToDos to add to this Project.",o.appendChild(p)}return o}});var I=function(){var n=document.getElementById("content")||document.createElement("content"),d=function(e){var t=document.createElement("div");t.classList.add("projecttodoscontainer");var d=s.findProject(e).getToDos();return t.appendChild(function(e,t,d){var o=document.createElement("div");if(o.classList.add("notodosdiv"),0===d){var r=document.createElement("div");r.classList.add("notodos"),r.textContent="No ToDos for this project yet",o.appendChild(r)}var i=document.createElement("button");return i.classList.add("addtodobutton"),i.textContent="Add ToDo",i.addEventListener("click",(function(d){n.appendChild(S.buildAddProjectToDoForm(d,e,t)),n.classList.add("blurred")})),o.appendChild(i),o}(e,t,d.length)),d.forEach((function(e){h(e,t)})),t},o=function(){var e=document.createElement("div");return e.classList.add("checkbox"),e.innerHTML="&#10003",e.addEventListener("click",(function(e){var t=e.target.parentNode.parentNode,n=Number(t.id);s.moveToDone(n),y(s.getToDoAry())})),e},r=function(){var e=document.getElementById("addnewbutton"),t=document.getElementById("formdiv");e.addEventListener("click",(function(){t.style.display="block",n.classList.add("blurred")}))},i=function(e){var t=document.createElement("div");switch(t.classList.add("labelstripe"),e){case"Standard":t.style.backgroundColor="orange";break;case"Low":t.style.backgroundColor="blue";break;case"High":t.style.backgroundColor="red";break;case"Normal":t.style.backgroundColor="skyblue";break;case"Urgent":t.style.backgroundColor="crimson"}return t},a=function(){document.querySelectorAll(".navitem").forEach((function(e){e.addEventListener("click",(function(e){switch(e.target.id){case"homelink":I.homePageBuilder();break;case"donelink":I.donePageBuilder();break;case"projectslink":I.projectPageBuilder()}}))}))},c=function(n,d,o){var r=document.createElement("div");return r.classList.add("".concat(n,"content")),o.forEach((function(o){"date"===o?r.appendChild(function(n){var d=document.createElement("div");d.classList.add("tododate");var o=document.createElement("div");return o.innerHTML='<span class="material-symbols-outlined">calendar_month</span>',d.appendChild(o),d.appendChild(function(n,d){var o=document.createElement("div"),r=t(n);return 1===r?o.textContent=e(n)+" ("+t(n)+" day left)":r>=0?o.textContent=e(n)+" ("+t(n)+" days left)":-1===r?(d.classList.add("missedtodo"),o.textContent=e(n)+" ("+Math.abs(t(n))+" day ago)"):(d.classList.add("missedtodo"),o.textContent=e(n)+" ("+Math.abs(t(n))+" days ago)"),o}(n,d)),d}(d.date)):"priority"===o?r.appendChild(function(e){var t=document.createElement("div");t.classList.add("todopriority"),t.appendChild(function(e){var t=document.createElement("div");return t.classList.add("prioritycircle"),"Standard"===e?t.style.backgroundColor="orange":"Low"===e?t.style.backgroundColor="blue":"High"===e?t.style.backgroundColor="red":"Normal"===e?t.style.backgroundColor="skyblue":"Urgent"===e&&(t.style.backgroundColor="crimson"),t}(e));var n=document.createElement("div");return n.textContent=e+" priority",t.appendChild(n),t}(d.priority)):r.appendChild(function(e,t,n){var d=document.createElement("div");return d.classList.add("".concat(e).concat(n)),d.textContent=t[n],d}(n,d,o))})),r},l=function(e,t){var n=document.createElement("div");n.classList.add("navitem"),n.setAttribute("id","".concat(e,"link"));var d=e.charAt(0).toUpperCase()+e.slice(1);return n.innerHTML='<span class="material-symbols-outlined">'.concat(t,"</span> ").concat(d),n},u=function(){n.textContent=""},p=function(e){var t=document.createElement("div");return t.classList.add("buttondiv"),t.appendChild(function(e){var t=document.createElement("button");return t.classList.add("editbutton"),t.setAttribute("objectid",e),t.innerHTML='<span class="material-symbols-outlined">edit</span>',t.addEventListener("click",(function(e){S.buildEditForm(e)})),t}(e)),t.appendChild(function(e){var t=document.createElement("button");return t.classList.add("deletebutton"),t.setAttribute("objectid",e),t.innerHTML='<span class="material-symbols-outlined">delete</span>',t.addEventListener("click",(function(e){var t=e.target,n=Number(t.getAttribute("objectid"));confirm("Are you sure you want to delete that?\n(This is an irreversible operation)")&&(s.deleteToDo(n),y(s.getToDoAry()))})),t}(e)),t},m=function(){var e,t,n=document.createElement("header");return n.setAttribute("id","header"),n.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","logodiv");var t=document.createElement("div");t.setAttribute("id","checkmark"),t.innerHTML="&#10003";var n=document.createElement("div");return n.setAttribute("id","logo"),n.textContent="To Do",e.appendChild(t),e.appendChild(n),e}()),n.appendChild(((e=document.createElement("div")).setAttribute("id","navigationdiv"),e.appendChild(l("home","house")),e.appendChild(l("done","done")),e.appendChild(l("projects","assignment")),e)),n.appendChild(((t=document.createElement("button")).setAttribute("id","addnewbutton"),t.textContent="Add ToDo",t)),n},v=function(e,t){u(),n.appendChild(m());var d=document.createElement("div");d.setAttribute("id","".concat(e,"div")),n.appendChild(d),n.appendChild(S.buildForm()),r(),document.getElementById("".concat(t,"link")).classList.add("active"),a()},f=function(e,t,n){void 0===n&&(n=!1);var d=e.iD.toString(),r=document.createElement("div");n?r.classList.add("donetodo"):r.classList.add("todo"),r.setAttribute("id",d),r.appendChild(i(e.priority));var a=document.createElement("div");a.classList.add("middlediv");var l=document.createElement("div");l.classList.add("checkboxdiv"),l.appendChild(o()),a.appendChild(l),a.appendChild(c("todo",e,["heading","text","date","priority"])),a.appendChild(p(d)),r.appendChild(a),t.appendChild(r)},h=function(e,t){var n=e.iD.toString(),d=document.createElement("div");d.classList.add("projecttodo"),d.setAttribute("id",n),d.appendChild(i(e.priority)),d.appendChild(c("todo",e,["heading","text","date","priority"])),t.appendChild(d)},y=function(e){var t=document.getElementById("tododiv")||document.createElement("tododiv");if(document.getElementById("tododiv").textContent="",0===e.length){var d=document.createElement("div");return d.setAttribute("id","actiondiv"),d.innerHTML='No ToDos yet. Time to <span id="addnew">add a new one</span>.',d.querySelector("#addnew").addEventListener("click",(function(){document.getElementById("formdiv").style.display="block",n.classList.add("blurred")})),void t.appendChild(d)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return f(e,t)}))},g=function(e){document.getElementById("donediv").textContent="";var t=document.getElementById("donediv");if(0===e.length){var n=document.createElement("div");return n.setAttribute("id","actiondiv"),n.innerHTML="No ToDos marked as done.",void t.appendChild(n)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return f(e,t,!0)}))},b=function(e){document.getElementById("projectdiv").textContent="";var t=document.getElementById("projectdiv");if(0===e.length){var r=document.createElement("div");return r.setAttribute("id","actiondiv"),r.innerHTML='No Projects yet. Time to <span id="addnew">add a new one</span>.',r.querySelector("#addnew").addEventListener("click",(function(){document.getElementById("projectformdiv").style.display="block",n.classList.add("blurred")})),void t.appendChild(r)}e.sort((function(e,t){return e.date.getTime()-t.date.getTime()})).forEach((function(e){return function(e,t){var n=document.createElement("div");n.classList.add("projectcontainer");var r,a,l=document.createElement("div");l.classList.add("project"),l.setAttribute("id",e.iD.toString()),l.appendChild(i(e.priority)),l.appendChild(function(e){var t=document.createElement("div");t.classList.add("middlediv");var n=document.createElement("div");return n.classList.add("checkboxdiv"),n.appendChild(o()),t.appendChild(n),t.appendChild(c("project",e,["name","date","priority"])),t.appendChild(p(e.iD.toString())),t}(e)),l.appendChild((r=e.iD,(a=document.createElement("div")).classList.add("expandbutton"),a.setAttribute("objectid",r.toString()),a.innerHTML='<span class="material-symbols-outlined">expand_more</span>',a.addEventListener("click",(function(){var e=document.getElementById(r.toString()),t=e.nextSibling;t.textContent="",t.appendChild(d(r)),"none"===t.style.display?(t.textContent="",t.appendChild(d(r)),t.style.display="block"):t.style.display="none",e.classList.toggle("expanded")})),a)),n.appendChild(l),n.appendChild(function(e){var t=document.createElement("div");return t.classList.add("projecttododiv"),t.setAttribute("objectid",e.iD.toString()),t.style.display="none",t}(e)),t.appendChild(n)}(e,t)}))};return{homePageBuilder:function(){v("todo","home"),y(s.getToDoAry())},donePageBuilder:function(){v("done","done"),g(s.getDoneAry())},projectPageBuilder:function(){u();var e=document.createElement("div");if(e.setAttribute("id","projectdiv"),n.appendChild(m()),s.getProjectAry().length>0&&n.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","newprojectbuttondiv");var t=document.createElement("button");return t.setAttribute("id","newprojectbutton"),t.textContent="Add a new project",e.appendChild(t),e}()),n.appendChild(e),n.appendChild(S.buildForm()),n.appendChild(S.buildNewProjectForm()),r(),s.getProjectAry().length>0){var t=document.getElementById("newprojectbutton"),d=document.getElementById("projectformdiv");t.addEventListener("click",(function(){d.style.display="block",n.classList.add("blurred")}))}document.getElementById("projectslink").classList.add("active"),a(),b(s.getProjectAry())},displayToDos:y,displayDoneToDos:g,displayProjects:b,createToDosDiv:d}}();const N=I;s.loadArys(),N.homePageBuilder()})();
//# sourceMappingURL=main.js.map